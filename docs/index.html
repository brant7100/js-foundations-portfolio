<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JS í•™ìŠµ í¬íŠ¸í´ë¦¬ì˜¤</title>
  <style>
    :root {
      --bg: #0b0b0c;
      --panel: #15161a;
      --text: #e7e9ea;
      --muted: #9aa0a6;
      --accent: #5da8ff;
    }
    * { box-sizing: border-box; }
    body { margin: 0; background: var(--bg); color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', sans-serif; }
    .wrap { display: grid; grid-template-columns: 300px 1fr; min-height: 100vh; }
    aside { background: var(--panel); padding: 20px; border-right: 1px solid #22252b; }
    main { padding: 24px; }
    h1 { font-size: 20px; margin: 0 0 10px; }
    ul { list-style: none; padding: 0; margin: 12px 0 0; }
    li { padding: 10px; border: 1px solid #2b3038; border-radius: 8px;
      margin-bottom: 8px; cursor: pointer; }
    li:hover { background: #0f1115; }
    .tag { display:inline-block; font-size:11px; padding:2px 6px;
      border:1px solid #333; border-radius:999px; margin-right:4px; color:var(--muted); }
    .muted { color: var(--muted); font-size: 12px; }
    .content { max-width: 900px; line-height: 1.6; }
    .content code { background:#0f1115; padding:2px 6px; border-radius:4px; }
    .content pre { background:#0f1115; padding:12px; border-radius:8px; overflow:auto; }
  </style>
</head>
<body>
  <div class="wrap">
    <aside>
      <h1>ğŸ“š JS í•™ìŠµ í¬íŠ¸í´ë¦¬ì˜¤</h1>
      <p class="muted">ì™¼ìª½ ëª©ë¡ì„ í´ë¦­í•˜ë©´ ì˜¤ë¥¸ìª½ì— ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>
      <ul id="log-list"></ul>
    </aside>
    <main>
      <div class="content" id="viewer">
        <h2>í™˜ì˜ ğŸ‘‹</h2>
        <p>ìƒˆ í•™ìŠµ ë¡œê·¸ë¥¼ ì‘ì„±í•˜ë ¤ë©´ <code>docs/logs/</code>ì—
          ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ ë§Œë“¤ê³ , <code>docs/logs.json</code>ì— í•­ëª©ì„ ì¶”ê°€í•˜ì„¸ìš”.</p>
      </div>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    async function loadList() {
      const ul = document.getElementById('log-list');
      try {
        const res = await fetch('./logs.json?_=' + Date.now());
        const data = await res.json();

        if (!data.items || data.items.length === 0) {
          ul.innerHTML = '<li>ë“±ë¡ëœ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
          return;
        }

        ul.innerHTML = data.items
          .sort((a, b) => (a.date < b.date ? 1 : -1))
          .map(item => {
            const tags = (item.tags || [])
              .map(t => `<span class="tag">${t}</span>`)
              .join('');
            return `
              <li data-path="${item.path}">
                <div><strong>${item.title}</strong></div>
                <div class="muted">${item.date}</div>
                <div>${tags}</div>
              </li>
            `;
          })
          .join('');

        ul.querySelectorAll('li').forEach(li => {
          li.addEventListener('click', () => loadMarkdown(li.dataset.path));
        });

      } catch (err) {
        console.error(err);
        ul.innerHTML = '<li>âš ï¸ logs.jsonì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</li>';
      }
    }

    async function loadMarkdown(path) {
      const viewer = document.getElementById('viewer');
      try {
        const res = await fetch(path + '?_=' + Date.now());
        const md = await res.text();
        viewer.innerHTML = marked.parse(md);
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } catch (err) {
        console.error(err);
        viewer.innerHTML = '<p>âš ï¸ ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
      }
    }

    loadList();
  </script>
</body>
</html>
